---
icon: contactGroup
title: 负载均衡介绍
---

学习负载均衡器的基础知识以及它们提供的服务。

## 什么是负载均衡？

在一个典型的数据中心中，每秒可能会有数百万个请求。为了处理这些请求，数千台（甚至十万台）服务器合作共享请求的负载。

> **注意：** 在这里，重要的是考虑如何将所有可用服务器之间的入站请求分配。

负载均衡器（**Load Balancer**，LB）是这个问题的答案。负载均衡器的工作是公平地将所有客户端请求分配到可用服务器池中。负载均衡器执行此任务以避免服务器过载或崩溃。

负载均衡层是数据中心中防火墙之后的第一个接触点。如果一个服务每秒只接收到几百个甚至几千个请求，那么可能不需要负载均衡器。但是，对于增加的客户请求，负载均衡器提供以下功能：

- **可扩展性**：通过添加服务器，应用程序/服务的容量可以无缝地增加。负载均衡器使这种上扩展或下扩展对最终用户透明。
- **可用性**：即使某些服务器崩溃或出现故障，系统仍然可用。负载均衡器的工作之一是隐藏服务器的故障和故障。
- **性能**：负载均衡器可以将请求转发到负载较小的服务器，使用户可以获得更快的响应时间。这不仅提高了性能，还提高了资源利用率。

这是负载均衡器如何工作的抽象描述：

![QQ截图20230406210610](/img/08-Load Balancers/QQ截图20230406210610.png)

负载均衡器的简化工作方式

## 安置负载均衡器

通常，负载均衡器位于客户端和服务器之间。请求通过负载均衡层发送到服务器，并通过该层返回到客户端。但这并不是负载均衡器使用的唯一点。

让我们考虑三个众所周知的服务器组。这是Web、应用程序和数据库服务器。为了将可用服务器之间的流量负载分配，可以在这三个服务的服务器实例之间使用以下方式的负载均衡器：

- 在应用程序和Web服务器/应用程序网关的终端用户之间放置负载均衡器。
- 在运行业务/应用程序逻辑的Web服务器和应用程序服务器之间放置负载均衡器。
- 在应用程序服务器和数据库服务器之间放置负载均衡器。

![QQ截图20230406210622](/img/08-Load Balancers/QQ截图20230406210622.png)

三层体系结构中负载均衡器可能的用途

实际上，负载均衡器可以在系统设计中的任何两个具有多个实例的服务之间使用。

## 负载均衡器提供的服务

负载均衡器不仅使服务可扩展、可用和高性能，它们还提供一些关键服务，如以下所示：

- **健康检查**：LB使用心跳协议监视终端服务器的健康状况和可靠性。健康检查的另一个好处是提高用户体验。
- **TLS终止**：LB通过处理与客户端的TLS终止来减轻终端服务器的负担。
- **预测分析**：负载均衡器可以通过对通过它们传递的流量进行分析或使用随时间获得的流量统计数据来预测流量模式。
- **减少人工干预**：由于负载均衡器自动化，因此在处理故障时减少了系统管理工作量。
- **服务发现**：LB的一个优点是，通过查询服务注册表，将客户端请求转发到适当的托管服务器。
- **安全性**：LB还可以通过在OSI模型的不同层（层3、4和7）上缓解拒绝服务（DoS）等攻击来提高安全性。

作为整体，负载均衡器为系统的整体设计提供了灵活性、可靠性、冗余性和效率。

思考题

###### 问题**Load Balancer故障会怎么样？它们不是单点故障（SPOF）吗？**
Load Balancer通常成对部署来作为灾难恢复的手段。如果一个Load Balancer出现故障，并且没有备用的话，整个服务就会停止。通常，为了保持高可用性，企业使用Load Balancer集群来随时检查Load Balancer的运行状况使用心跳通信。如果主LB发生故障，备份将会接管。但是，如果整个集群发生故障，在紧急情况下也可以进行手动重路由。在接下来的课程中，我们将看到如何在复杂应用中使用Load Balancer以及哪种类型的Load Balancer适用于哪种用例。